import{r as e,k as i,u as r,j as s,H as a}from"./vendor-DeShHRvC.js";import{g as n}from"./index-De2e4y7I.js";import"./vendor-jspdf-CcCK2Zy6.js";import"./vendor-@react-oauth-Di4DNcpW.js";import"./http-VSpmzgsF.js";import"./vendor-matter-js-BjVipDty.js";import"./vendor-ogl-YOJCSol6.js";import"./vendor-motion-BfReZoSV.js";import"./vendor-gsap-CSqFbIEy.js";function t(){const[t,o]=e.useState("verifying"),[c,l]=e.useState(""),[d]=i(),u=r();e.useEffect(()=>{(async()=>{var e,i;const r=d.get("token");if(!r)return o("error"),void l("No verification token provided. Please check your email link.");if(!/^[a-f0-9]{64}$/.test(r))return o("error"),void l("Invalid verification link. Please request a new verification email.");try{const e=await n.post("/verify-email",{token:r});o("success"),l(e.message||"Your email has been verified successfully!"),setTimeout(()=>{u("/login")},3e3)}catch(s){console.error("Verification error:",s),(null==(e=s.message)?void 0:e.toLowerCase().includes("expired"))?(o("expired"),l("This verification link has expired. Please request a new one by signing up again.")):(null==(i=s.message)?void 0:i.toLowerCase().includes("already verified"))?(o("success"),l("Your email is already verified! You can sign in now."),setTimeout(()=>u("/login"),3e3)):(o("error"),l(s.message||"Verification failed. Please try again or contact support."))}})()},[d,u]);return s.jsxs("div",{className:"verify-email-page",children:[s.jsxs(a,{children:[s.jsx("title",{children:"Verify Email - JustLayMe"}),s.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),s.jsx("div",{className:"verify-container",children:s.jsxs("div",{className:"verify-box",children:[s.jsx("h1",{className:"verify-title",children:"JustLay.Me"}),s.jsxs("div",{className:`status-display ${t}`,children:[(()=>{switch(t){case"verifying":return s.jsx("div",{className:"spinner"});case"success":return s.jsx("div",{className:"icon success",children:"✓"});case"expired":return s.jsx("div",{className:"icon expired",children:"⌛"});case"error":return s.jsx("div",{className:"icon error",children:"✕"});default:return null}})(),s.jsx("h2",{children:(()=>{switch(t){case"verifying":return"Verifying Your Email...";case"success":return"Email Verified!";case"expired":return"Link Expired";case"error":return"Verification Failed";default:return""}})()}),s.jsx("p",{children:c}),"success"===t&&s.jsx("p",{className:"redirect-notice",children:"Redirecting to login..."}),("error"===t||"expired"===t)&&s.jsx("div",{className:"action-buttons",children:s.jsx("button",{className:"btn-primary",onClick:()=>u("/login"),children:"Go to Login"})})]})]})})]})}export{t as default};
